machine:
  ghc:
    version: 7.10.2

dependencies:
  override:
    - cabal update
    - cabal sandbox init
    - cabal install --upgrade-dependencies --constraint="template-haskell installed" --dependencies-only --enable-tests --force-reinstall
    - cabal configure --enable-tests
    - cabal build

test:
  post:
    - cabal haddock --builddir=$CIRCLE_ARTIFACTS
